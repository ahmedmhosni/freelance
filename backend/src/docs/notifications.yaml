paths:
  /api/v2/notifications:
    get:
      tags:
        - Notifications
      summary: Get all notifications
      description: Retrieve a list of all notifications for the authenticated user
      parameters:
        - in: query
          name: read
          schema:
            type: boolean
          description: Filter by read status
          example: false
        - in: query
          name: type
          schema:
            type: string
            enum: [info, success, warning, error]
          description: Filter by notification type
          example: info
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Number of items to return
        - in: query
          name: offset
          schema:
            type: integer
            default: 0
            minimum: 0
          description: Number of items to skip
      responses:
        '200':
          description: Notifications retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
              example:
                data:
                  - id: 1
                    title: New invoice created
                    message: Invoice INV-2024-001 has been created
                    type: info
                    read: false
                    createdAt: '2024-01-15T10:00:00.000Z'
                meta:
                  total: 25
                  limit: 10
                  offset: 0
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/ServerError'

    post:
      tags:
        - Notifications
      summary: Create a new notification
      description: Create a new notification (admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - message
                - userId
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 200
                  example: System maintenance scheduled
                message:
                  type: string
                  example: System will be down for maintenance on Jan 20
                type:
                  type: string
                  enum: [info, success, warning, error]
                  default: info
                  example: warning
                userId:
                  type: integer
                  description: Target user ID (or null for all users)
                  example: 1
                link:
                  type: string
                  description: Optional link for the notification
                  example: /maintenance
      responses:
        '201':
          description: Notification created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/ServerError'

  /api/v2/notifications/{id}:
    get:
      tags:
        - Notifications
      summary: Get notification by ID
      description: Retrieve a specific notification by ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
          example: 1
      responses:
        '200':
          description: Notification retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'

    delete:
      tags:
        - Notifications
      summary: Delete notification
      description: Delete a notification
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
          example: 1
      responses:
        '200':
          description: Notification deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Notification deleted successfully
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'

  /api/v2/notifications/{id}/read:
    put:
      tags:
        - Notifications
      summary: Mark notification as read
      description: Mark a specific notification as read
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
          example: 1
      responses:
        '200':
          description: Notification marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'

  /api/v2/notifications/mark-all-read:
    put:
      tags:
        - Notifications
      summary: Mark all notifications as read
      description: Mark all notifications for the authenticated user as read
      responses:
        '200':
          description: All notifications marked as read
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: All notifications marked as read
                  count:
                    type: integer
                    description: Number of notifications marked as read
                    example: 15
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/ServerError'

  /api/v2/notifications/unread-count:
    get:
      tags:
        - Notifications
      summary: Get unread notification count
      description: Get the count of unread notifications for the authenticated user
      responses:
        '200':
          description: Unread count retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 5
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/ServerError'

components:
  schemas:
    Notification:
      type: object
      properties:
        id:
          type: integer
          example: 1
        userId:
          type: integer
          example: 1
        title:
          type: string
          example: New invoice created
        message:
          type: string
          example: Invoice INV-2024-001 has been created
        type:
          type: string
          enum: [info, success, warning, error]
          example: info
        read:
          type: boolean
          example: false
        link:
          type: string
          nullable: true
          example: /invoices/1
        createdAt:
          type: string
          format: date-time
          example: '2024-01-15T10:00:00.000Z'
        readAt:
          type: string
          format: date-time
          nullable: true
          example: null
